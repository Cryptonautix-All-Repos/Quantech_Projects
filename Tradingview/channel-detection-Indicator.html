<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Channel Detection Indicator - Quantech Innovation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-dark: #0a0e27;
            --secondary-dark: #131829;
            --accent-cyan: #00d4ff;
            --accent-blue: #0080ff;
            --text-primary: #ffffff;
            --text-secondary: #b8c5d6;
            --card-bg: #1a1f3a;
            --success: #00ff88;
            --danger: #ff3366;
            --border-color: rgba(0, 212, 255, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        header {
            background: rgba(19, 24, 41, 0.95);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .back-btn {
            padding: 0.6rem 1.2rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: var(--accent-cyan);
            color: var(--primary-dark);
            border-color: var(--accent-cyan);
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        @media (min-width: 1024px) {
            .container {
                grid-template-columns: 240px 1fr;
            }
        }

        /* Sidebar Navigation */
        .sidebar-nav {
            position: sticky;
            top: 100px; /* Adjust based on header height */
            align-self: start;
        }

        .sidebar-nav h3 {
            font-size: 1.1rem;
            color: var(--accent-cyan);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-nav ul {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.75rem;
        }

        .sidebar-nav a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            display: block;
            padding: 0.25rem 0;
        }

        .sidebar-nav a:hover {
            color: var(--accent-cyan);
            transform: translateX(5px);
        }

        /* Main Content Sections */
        .content-main {
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
            padding: 2rem;
        }

        .content-main h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
        }

        .content-section {
            margin-bottom: 3rem;
        }

        .content-section h2 {
            font-size: 1.8rem;
            color: var(--accent-cyan);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .content-section p, .content-section li {
            color: var(--text-secondary);
            font-size: 1.05rem;
            line-height: 1.7;
            margin-bottom: 1rem;
        }

        .content-section ul {
            list-style-position: inside;
            padding-left: 1rem;
        }

        .content-section li {
            margin-bottom: 0.5rem;
        }

        /* Parameter Table */
        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }

        .param-table th, .param-table td {
            padding: 0.8rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .param-table th {
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .param-table code {
            font-family: 'Courier New', Courier, monospace;
            background: var(--secondary-dark);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.9rem;
            color: var(--accent-cyan);
        }

        /* Image Placeholders */
        .img-placeholder {
            width: 100%;
            height: auto;
            aspect-ratio: 16 / 9;
            max-height: 600px;
            background: var(--secondary-dark);
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        .img-placeholder p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin: 0;
            padding: 2rem;
        }

        .caption {
            display: block;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
            font-size: 0.9rem;
        }

        /* Risk Disclaimer */
        .risk-disclaimer {
            background: rgba(255, 51, 102, 0.1);
            border: 1px solid var(--danger);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .risk-disclaimer h3 {
            color: var(--danger);
            margin-bottom: 0.5rem;
        }

        .risk-disclaimer p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin: 0;
            line-height: 1.6;
        }

        /* Footer */
        footer {
            background: var(--secondary-dark);
            padding: 2rem;
            text-align: center;
            border-top: 1px solid var(--border-color);
            margin-top: 4rem;
        }

        .footer-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .footer-btn {
            padding: 0.8rem 2rem;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue));
            color: var(--primary-dark);
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .footer-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        footer p {
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .footer-tagline {
            color: var(--accent-cyan);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 1023px) {
            .sidebar-nav {
                position: static;
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 1rem;
                margin-bottom: 2rem;
            }
            .sidebar-nav ul {
                display: flex;
                flex-wrap: wrap;
                gap: 1rem;
            }
            .sidebar-nav li { margin-bottom: 0; }
        }
        @media (max-width: 768px) {
            header { padding: 1rem; }
            .content-main h1 { font-size: 2rem; }
            .content-section h2 { font-size: 1.5rem; }
            .container { padding: 0 1rem; margin-top: 1.5rem;}
            .content-main { padding: 1.5rem; }
            .param-table { font-size: 0.9rem; }
            .param-table th, .param-table td { padding: 0.6rem 0.5rem; }
            .img-placeholder p { font-size: 1rem; }
        }
    </style>
    <script>
        // Smooth scroll for navigation
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.sidebar-nav a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    if(targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">Quantech Innovation</div>
            <a href="index.html" class="back-btn">← Back to Portfolio</a>
        </div>
    </header>

    <div class="container">
        <nav class="sidebar-nav">
            <h3>Quick Navigation</h3>
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#methodology">Methodology & Logic</a></li>
                <li><a href="#parameters">Parameters & Settings</a></li>
                <li><a href="#specs">Technical Specifications</a></li>
                <li><a href="#visuals">Visual Documentation</a></li>
                <li><a href="#usage">Usage Guide</a></li>
                <li><a href="#alerts">Alert Configuration</a></li>
            </ul>
        </nav>

        <main class="content-main">
            <h1>Channel Detection Indicator</h1>

            <section id="overview" class="content-section">
                <h2>Overview</h2>
                <p>The Channel Detection Indicator is an advanced, non-repainting tool designed to automatically identify and plot valid parallel trend channels on the chart. Its primary goal is to provide traders with an objective, data-driven view of market trends, support/resistance zones, and potential breakout levels.</p>
                <p>The indicator's key innovation is its robust, **non-repainting pivot detection system**. Unlike simple pivot high/low functions, this script identifies pivots by analyzing a confirmed *change in trend*. It uses four independent, weighted trend-analysis methodologies (EMA Slope, Linear Decay, Exponential Decay, and Gaussian Decay) to score the trend on both sides of a potential pivot. A pivot is only confirmed when the trend consensus definitively reverses.</p>
                <p>By connecting a valid four-point (HLHL or LHLH) sequence of these high-quality pivots, the indicator draws channels that are filtered for parallelism and convergence, ensuring only high-probability trend structures are displayed.</p>
            </section>

            <section id="methodology" class="content-section">
                <h2>Methodology & Logic</h2>
                <p>The indicator operates using a sophisticated, multi-phase architecture to ensure stable, non-repainting analysis.</p>
                <ul>
                    <li><strong>1. Three-Phase Processing:</strong> The script uses a three-stage process similar to our market structure tools.
                        <ul>
                            <li><strong>Phase 1: Data Collection:</strong> Gathers all available bar data into an efficient map structure.</li>
                            <li><strong>Phase 2: Historical Processing:</strong> Analyzes all historical data *except* for a recent "buffer zone" defined by the `lookback_limit` input. This ensures historical pivots and channels are locked and will not repaint.</li>
                            <li><strong>Phase 3: Real-Time Processing:</strong> Analyzes new bars only after they are "safe" (i.e., outside the buffer zone), maintaining the non-repainting guarantee.</li>
                        </ul>
                    </li>
                    <li><strong>2. Multi-Method Pivot Detection (Core Logic):</strong>
                        <ul>
                            <li>The script optionally prescreens for local highs/lows.</li>
                            <li>For each candidate bar, it analyzes the trend to its left and to its right using a weighted average of four distinct methodologies: EMA Slope, Linear Decay, Exponential Decay, and Gaussian Decay.</li>
                            <li>A **Pivot High ("H")** is confirmed only if the combined trend score is positive (uptrend) on the left and negative (downtrend) on the right.</li>
                            <li>A **Pivot Low ("L")** is confirmed only if the combined trend score is negative (downtrend) on the left and positive (uptrend) on the right.</li>
                        </ul>
                    </li>
                    <li><strong>3. Channel Formation & Filtering:</strong>
                        <ul>
                            <li>The indicator searches the confirmed pivots for a valid four-point sequence: either **High-Low-High-Low (HLHL)** or **Low-High-Low-High (LHLH)**.</li>
                            <li>Once this 4-point pattern is found, it calculates the line equations for the two highs and two lows.</li>
                            <li><strong>Parallelism Filter:</strong> The channel is only drawn if the two lines are "reasonably parallel," based on user-defined `max_slope_diff` and `max_angle_diff_degrees` settings.</li>
                            <li><strong>Convergence Filter:</strong> Optionally, the script rejects channels that converge too quickly (forming a wedge).</li>
                        </ul>
                    </li>
                    <li><strong>4. Channel Validation & Breakout Detection:</strong>
                        <ul>
                            <li>Once a channel is drawn, it is considered "active". The indicator monitors subsequent bars.</li>
                            <li>If a bar's high or low breaks the channel boundary by more than a specified **ATR-based tolerance**, the channel is considered violated and is deactivated.</li>
                            <li>The endpoint of the channel is drawn at the point of this violation.</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section id="parameters" class="content-section">
                <h2>Parameters & Settings</h2>
                <p>The indicator offers deep customization over its detection engine.</p>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Parameter Group</th>
                            <th>Key Inputs</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>Pivot Prescreening</code></td>
                            <td><code>Enable Local High/Low Prescreening</code>, <code>Local Extreme Window Size</code></td>
                            <td>Optionally speeds up analysis by first requiring a bar to be a simple local high/low before running the advanced trend analysis on it.</td>
                        </tr>
                        <tr>
                            <td><code>Trend Detection Methods</code></td>
                            <td><code>Price Source</code>, <code>lookback_limit</code>, <code>decay_factor</code>, <code>sigma</code>, <code>enable...</code> & <code>...weight</code> (for all 4 methods)</td>
                            <td>This is the core engine. <code>lookback_limit</code> controls the anti-repainting buffer and the analysis window size. The <code>enable</code> and <code>weight</code> inputs let you customize the trend-scoring formula, or isolate a single method (e.g., set EMA weight to 1.0 and others to 0.0).</td>
                        </tr>
                        <tr>
                            <td><code>Channel Detection</code></td>
                            <td><code>max_slope_diff</code>, <code>max_angle_diff_degrees</code>, <code>enable_convergence_check</code>, <code>breakout_tolerance_atr_multiplier</code>, <code>atr_length</code>, <code>max_channels_storage</code></td>
                            <td>Controls the "strictness" of channel formation. Lower <code>max_slope_diff</code> requires more parallel lines. Lower <code>breakout_tolerance_atr_multiplier</code> makes channels break more easily. <code>max_channels_storage</code> manages memory by removing old channels.</td>
                        </tr>
                        <tr>
                            <td><code>Display</code></td>
                            <td><code>Show Channel Lines</code>, <code>Show Pivot Labels</code>, <code>Show Detailed Trend Scores</code></td>
                            <td>Toggles the visibility of the channels and pivots. <code>Show Detailed Trend Scores</code> changes the "H" and "L" pivot labels to a detailed debug output of all four trend scores.</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section id="specs" class="content-section">
                <h2>Technical Specifications</h2>
                <ul>
                    <li><strong>PineScript Version:</strong> v6</li>
                    <li><strong>Indicator Type:</strong> Overlay (plots directly on the main price chart)</li>
                    <li><strong>Repainting:</strong> No. The indicator uses a buffered, three-phase processing system specifically designed to create stable, non-repainting pivots and channels.</li>
                    <li><strong>Applicable Timeframes:</strong> All. Logic is price-action based. Higher timeframes will yield more significant, long-term channels.</li>
                    <li><strong>Asset Classes:</strong> All (Forex, Crypto, Stocks, Indices, Commodities).</li>
                </ul>
            </section>

            <section id="visuals" class="content-section">
                <h2>Visual Documentation</h2>
                <p>The indicator plots clear, objective structures on the chart.</p>

                <div class="img-placeholder">
                    <p>Example 1: [Channel Detection] on BTC/USD 4H Chart<br>(Showing a long-term bullish channel (blue lines) identified by the indicator)</p>
                </div>
                <span class="caption">This placeholder demonstrates the primary use case: identifying a stable, parallel uptrend. The blue lines act as dynamic support and resistance.</span>

                <div class="img-placeholder">
                    <p>Example 2: [Channel Detection] Breakout and New Channel<br>(Showing a bearish channel that was broken, followed by the formation of a new bullish channel)</p>
                </div>
                <span class="caption">This placeholder illustrates the dynamic nature of the script. When one channel is invalidated by a breakout, the script begins searching for the next valid 4-point pattern to form a new one.</span>

                <div class="img-placeholder">
                    <p>Example 3: Pivot Detection ('H' and 'L' labels)<br>(Zoomed-in view showing the 'H' and 'L' pivot labels that form the anchor points for the channels)</p>
                </div>
                <span class="caption">This placeholder highlights the core pivot engine. Each 'H' or 'L' represents a confirmed trend reversal, not just a simple high or low.</span>
            </section>

            <section id="usage" class="content-section">
                <h2>Usage Guide</h2>
                <p>Interpreting the indicator's plots can provide a clear framework for trend analysis.</p>
                <ul>
                    <li><strong>Pivot Labels ("H" / "L"):</strong> These are the fundamental building blocks. An "H" signifies a confirmed pivot where the trend shifted from up to down. An "L" signifies a shift from down to up. A series of higher "H" and "L" pivots indicates an uptrend.</li>
                    <li><strong>Channel Lines (Blue):</strong> These lines represent a *validated* trend, connecting four or more confirmed pivots.
                        <ul>
                            <li><strong>In an Uptrend:</strong> The lower line is the primary support, and the upper line is the target/resistance.</li>
                            <li><strong>In a Downtrend:</strong> The upper line is the primary resistance, and the lower line is the target/support.</li>
                        </ul>
                    </li>
                    <li><strong>Breakout Identification:</strong> When price closes *outside* the channel by more than the `breakout_tolerance_atr_multiplier`, the indicator deactivates that channel. This event can be used as a signal for a potential trend change or a trend acceleration.</li>
                    <li><strong>Parameter Tuning:</strong>
                        <ul>
                            <li><strong>`lookback_limit`:</strong> This is the most important setting. Higher values (e.g., 20-30) will find major, long-term channels and ignore minor noise. Lower values (e.g., 5-10) will find shorter-term, more sensitive channels.</li>
                            <li><strong>`breakout_tolerance_atr_multiplier`:</strong> This controls sensitivity. A low value (e.g., 0.5) will cause channels to break on minor wicks. A high value (e.g., 2.0) will allow price to significantly overshoot the channel before it's considered broken.</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section id="alerts" class="content-section">
                <h2>Alert Configuration</h2>
                <p>This indicator is designed for sophisticated visual analysis and does not include built-in `alert()` or `alertcondition()` functions. Its primary purpose is to draw objective structures on the chart.</p>
                <p>However, you can manually create alerts on any channel line drawn by the indicator:</p>
                <ol>
                    <li>Wait for the indicator to draw a channel (two blue lines).</li>
                    <li>Right-click on the upper or lower channel line.</li>
                    <li>Select "Add Alert on [Line]".</li>
                    <li>Configure the alert to trigger on "Crossing" or "Crossing Up/Down" to be notified of a potential channel breakout.</li>
                </ol>
            </section>

            <div class="risk-disclaimer">
                <h3>Risk Disclaimer</h3>
                <p>Trading involves substantial risk. This indicator is a technical analysis tool and does not guarantee profitable trades. Past performance does not indicate future results. Users should conduct their own analysis and risk assessment before making any trading decisions.</p>
            </div>
        </main>
    </div>

    <footer>
        <div class="footer-buttons">
            <a href="mailto:contact@quantechinnovation.com" class="footer-btn">✉ Contact Us</a>
            <a href="https://portfolio.quantechinnovation.com/" class="footer-btn" target="_blank">🌐 View Portfolio</a>
        </div>
        <p>&copy; 2024 Quantech Innovation. All Rights Reserved.</p>
        <p class="footer-tagline">Built for Professional Traders</p>
    </footer>

</body>
</html>